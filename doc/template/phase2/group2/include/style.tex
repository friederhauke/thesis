\documentclass[10pt,a4paper,portrait]{article}
\usepackage{geometry}                % See geometry.pdf to learn the layout options. There are lots.
\geometry{a4paper}                   % ... or a4paper or a5paper or ... 
%\geometry{landscape}                % Activate for for rotated page geometry
\usepackage[parfill]{parskip}    % Activate to begin paragraphs with an empty line rather than an indent
\usepackage{graphicx}
\usepackage{subfig}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{epstopdf}
\usepackage{multicol}
\usepackage{amsmath}
\usepackage{listings}
\usepackage{url}
\usepackage{multirow}
\usepackage{color}
\definecolor{grey}{rgb}{0.5,0.5,0.5}
\definecolor{darkgreen}{rgb}{0.5,0.5,0.0}
\lstset{ %
language=Matlab, % the language of the code
basicstyle=\ttfamily, % the size of the fonts
       % that are used for the code
numbers=left, % where to put the line-numbers
numberstyle=\footnotesize, % the size of the
        %fonts that are used for the line-numbers
stepnumber=1, % the step between two
       % line-numbers. If it's 1, each line 
keywordstyle=\color{darkgreen}, % Keywords
       % font ('*' = uppercase)
commentstyle=\color{grey},
numbersep=5pt, % how far the line-numbers are
       % from the code
backgroundcolor=\color{white}, % choose the
        %background color. You must add \usepackage{color}
showspaces=false, % show spaces adding
        %particular underscores
showstringspaces=false, % underline spaces
        %within strings
showtabs=false, % show tabs within strings
       % adding particular underscores
frame=single, % adds a frame around the code
tabsize=2, % sets default tabsize to 2 spaces
captionpos=b, % sets the caption-position to
        %bottom
breaklines=true, % sets automatic line
        %breaking
breakatwhitespace=false, % sets if automatic
        %breaks should only happen at whitespace
 % show the filename of files included with
       % \lstinputlisting;
 % also try caption instead of title
escapeinside={\%*}{*)} % if you want to add a
       % comment within your code
}
\DeclareGraphicsRule{.tif}{png}{.png}{`convert #1 `dirname #1`/`basename #1 .tif`.png}